name: Deploy to Cloudflare Pages on PR
on:
  pull_request:
    branches:
      - main
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@0ad4b8fadaa221de15dcec353f45205ec38ea70b #v4.1.4
      - uses: oven-sh/setup-bun@8f24390df009a496891208e5e36b8a1de1f45135 #v1.2.1
        with:
          bun-version: 1.1.2
      - run: bun install
      - run: bun run build
      - uses: cloudflare/pages-action@f0a1cd58cd66095dee69bfa18fa5efd1dde93bca #v1.5.0
        with:
          apiToken: ${{ secrets.CLOUDFLARE_API_TOKEN }}
          accountId: ${{ secrets.CLOUDFLARE_ACCOUNT_ID }}
          projectName: portfolio
          directory: dist
          branch: main
